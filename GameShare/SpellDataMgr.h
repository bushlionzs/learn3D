/*$T Common/SpellDataMgr.h GC 1.140 10/10/09 10:06:54 */


/*$6
 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 */


/* SpellDataMgr.h 功能说明： */
#pragma once
#include "StructDB.h"
#include "TAB.h"

class		CSpellDataMgr
{
/*
 -----------------------------------------------------------------------------------------------------------------------
 -----------------------------------------------------------------------------------------------------------------------
 */
protected:
	static CSpellDataMgr	*s_pSkillDataMgr;

/*
 -----------------------------------------------------------------------------------------------------------------------
 -----------------------------------------------------------------------------------------------------------------------
 */
public:

	/*
	 ===============================================================================================================
	 ===============================================================================================================
	 */
	static CSpellDataMgr *GetSpellDataMgr(void)
	{
		return s_pSkillDataMgr;
	}

/*
 -----------------------------------------------------------------------------------------------------------------------
 -----------------------------------------------------------------------------------------------------------------------
 */
public:
	CSpellDataMgr(void);
	~			CSpellDataMgr(void);

	BOOL			Init(const char *lpszPathName);
	BOOL			Init(const TAB::TABFile *pDataBase);
	void			Term(void);

	SSkillData		*GetSkillData(uint32 dwID);
	const SSkillData	*GetConstSkillData(uint32 dwID) const;

	int32			GetRandAnim(uint32 dwSkillID, int32 nActionIndex = -1, BOOL bSendAnim = TRUE) const;
	int32			GetAnimCount(uint32 dwSkillID, BOOL bSendAnim = TRUE) const;

/*
 -----------------------------------------------------------------------------------------------------------------------
 -----------------------------------------------------------------------------------------------------------------------
 */
protected:
	const std::vector<int32>	*GetAnimList(uint32 uSkillID, BOOL bSendAnim = TRUE) const;

/*
 -----------------------------------------------------------------------------------------------------------------------
 -----------------------------------------------------------------------------------------------------------------------
 */
protected:
	TAB::TABFile * m_pDBCFileLoad;
	const TAB::TABFile * m_pDataBase;
};

/*
 =======================================================================================================================
 =======================================================================================================================
 */

inline CSpellDataMgr *GetSpellDataMgr(void)
{
	return CSpellDataMgr::GetSpellDataMgr();
}
