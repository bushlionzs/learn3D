/*$T MapServer/Server/Script/LuaStack.h GC 1.140 10/10/07 10:07:52 */


/*$6
 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 */


#ifndef _LUASCRIPT_LUASTACK_H_
#define _LUASCRIPT_LUASTACK_H_

#define MAX_STACK_STEP		(48)
#define MAX_FUNCTION_LENGTH	(256)

namespace	LuaScript
{
class	LuaStackStep
{
/*
 -----------------------------------------------------------------------------------------------------------------------
 -----------------------------------------------------------------------------------------------------------------------
 */
public:
	LuaStackStep(void);
	~	LuaStackStep(void);

	void	Reset(void);

/*
 -----------------------------------------------------------------------------------------------------------------------
 -----------------------------------------------------------------------------------------------------------------------
 */
public:
	ScriptID_t	m_idScriptStep;
	char		m_strFunctionStep[MAX_FUNCTION_LENGTH];
};

class	LuaStack
{
/*
 -----------------------------------------------------------------------------------------------------------------------
 -----------------------------------------------------------------------------------------------------------------------
 */
public:
	LuaStack(void);
	~	LuaStack(void);

	void	Reset(void);

	BOOL	StepEnter(char *funcname, ScriptID_t scriptid);
	BOOL	StepLeave(void);

/*
 -----------------------------------------------------------------------------------------------------------------------
 -----------------------------------------------------------------------------------------------------------------------
 */
public:
	int32		m_nCurrentStep;
	LuaStackStep	m_StackStep[MAX_STACK_STEP];

/*
 -----------------------------------------------------------------------------------------------------------------------
 -----------------------------------------------------------------------------------------------------------------------
 */
public:
	static LuaStack RunStack[MAX_SCENE];
};
}
#endif
