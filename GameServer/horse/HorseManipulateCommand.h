/*$T MapServer/Server/Obj/Horse/HorseManipulateCommand.h GC 1.140 10/10/07 10:07:30 */


/*$6
 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 */


#ifndef HorseManipulateCommand_h__
#define HorseManipulateCommand_h__

#include "TypeDefine.h"
#include "StructDB.h"
#include "HorseStruct.h"
#include "StructPet.h"
#include "act_define.h"
class	Player;

class	HorseManipulateCommand
{
/*
 -----------------------------------------------------------------------------------------------------------------------
 -----------------------------------------------------------------------------------------------------------------------
 */
public:
	HorseManipulateCommand();
	~	HorseManipulateCommand();

	/*
	 ===============================================================================================================
	 ===============================================================================================================
	 */
	virtual int32 GetManipulateType()
	{
		return MANIPULATE_INVALID;
	}

	virtual void	ExecutManipulate(_HorseManipulate *pMamipulate, Player *pPlayer) = 0;
	virtual BOOL	IsCanManipulate(_HorseManipulate *pMamipulate, Player *pPlayer);

	/*
	 ===============================================================================================================
	 ===============================================================================================================
	 */
	void SetOpType(ePetActType newType)
	{
		m_OpType = newType;
	}

	/*
	 ===============================================================================================================
	 ===============================================================================================================
	 */
	ePetActType GetOpType()
	{
		return m_OpType;
	}

/*
 -----------------------------------------------------------------------------------------------------------------------
 -----------------------------------------------------------------------------------------------------------------------
 */
protected:
	BOOL	CommonCheck(_HorseManipulate *pMamipulate, Player *pPlayer);

	BOOL	IsMating(Player *pPlayer, _HorseManipulate *pMamipulate);
	void	SendResult(Player *pPlayer, int32 iResult);
	void	ReCallHorse(Player *pPlayer);

/*
 -----------------------------------------------------------------------------------------------------------------------
 -----------------------------------------------------------------------------------------------------------------------
 */
protected:
	ePetActType	m_OpType;
};
#endif
